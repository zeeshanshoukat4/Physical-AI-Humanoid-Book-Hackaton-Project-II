# Data Model

This document describes the data models for the entities stored in the Neon Serverless Postgres database.

## 1. BookChunk

Represents a semantic chunk of text from the book.

-   **`id`**: `integer`, primary key
-   **`content`**: `text`, the raw text of the chunk
-   **`page_number`**: `integer`, the page number where the chunk is located
-   **`section_title`**: `varchar(255)`, the title of the section containing the chunk
-   **`embedding`**: `vector`, the embedding of the content (Note: this will be stored in Qdrant, not Postgres)

## 2. UserQuery

Represents a single question submitted by a user.

-   **`id`**: `integer`, primary key
-   **`query_text`**: `text`, the user's question
-   **`selected_context`**: `text`, the text the user selected
-   **`created_at`**: `timestamp`, the time the query was created

## 3. QueryLog

A record of a transaction, linking a user query to the generated response and retrieved chunks.

-   **`id`**: `integer`, primary key
-   **`user_query_id`**: `integer`, foreign key to `UserQuery.id`
-   **`generated_response`**: `text`, the answer generated by the Chore API
-   **`retrieved_chunks`**: `jsonb`, the `BookChunk`s used to generate the response
-   **`created_at`**: `timestamp`, the time the log entry was created
